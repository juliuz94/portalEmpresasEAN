<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Portal Empresas Red Ean</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="css/index.css">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
    <!-- Place your kit's code here -->
    <script src="https://kit.fontawesome.com/26ae697a10.js" crossorigin="anonymous"></script>

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous">
    </script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous">
    </script>

</head>

<body>

    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div id="dismiss">
                <i class="fas fa-arrow-left"></i>
            </div>

            <div class="sidebar-header">
                <img src="images/RedEanistaB.png" alt="">
            </div>

            <ul class="list-unstyled components">
                <p>Portal de empresas</p>
                <li>
                    <a href="#">Productos</a>
                </li>
                <li>
                    <a href="#">Cupones</a>
                </li>
                <li>
                    <a href="#">Perfil empresa</a>
                </li>
                <li>
                    <a href="#">PQR</a>
                </li>
            </ul>
        </nav>
        <% if(user.accepterTerms === 'false') { %>
        <div class="t-c">
            <div class="container-fluid">
                <div class="" tabindex="-1" role="dialog">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Términos y condiciones de uso para empresas</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body text-left">
                                <p>• Este documento es parte integrante de los Términos y Condiciones Generales de La
                                    Red Ean. El incumplimiento de estas Políticas implicará la baja del contenido y
                                    podrá derivar en la aplicación de sanciones y/o eventual inhabilitación de cuenta.
                                    • Será publicado el aviso que motive el intercambio de productos no prohibidos por
                                    los términos y condiciones de Red Ean.
                                    • Se encuentran prohibidas las comparaciones entre productos y servicios ofertados
                                    por otro usuario
                                    • Las descripciones pueden incluir cualquier tipo de información necesaria para
                                    identificar el producto o servicio, siempre que no vulnere ninguna disposición
                                    contemplada en los términos y condiciones o la Ley. Está prohibido hacer remisión a
                                    otras páginas web, cookies o ventanas adicionales. La única remisión permitida es
                                    aquella que lleve al usuario a conocer los términos y condiciones de Red EAN.
                                    • La Red Ean sólo pone a disposición de los Usuarios un espacio virtual que les
                                    permite comunicarse mediante Internet para encontrar una forma de vender o comprar
                                    artículos y/o servicios, además no tiene participación alguna en el proceso de
                                    negociación y perfeccionamiento del contrato definitivo entre las partes. Por ello,
                                    son las partes las obligadas a cumplir con las obligaciones fiscales e impositivas
                                    impuestas por la ley.
                                    • Se establece que los precios de los productos publicados deberán ser expresados
                                    con IVA incluido cuando corresponda la aplicación del mismo, en la moneda de curso
                                    legal. La Red Ean podrá remover cualquier publicación cuyo precio no sea expresado
                                    de esta forma para evitar confusiones o malentendidos en cuanto al precio final del
                                    producto.
                                    • Las publicaciones que demuestren una intención de evadir o eludir impuestos de
                                    alguna forma serán terminadas.
                                    • Está prohibido la utilización de lenguaje inapropiado, ya sea en la descripción
                                    del servicio o producto, como en la interacción entre los usuarios.
                                    • No se permitirán, aquellas publicaciones que contengan imágenes (que a criterio de
                                    la Red Ean sean) provocativas o sensuales o que puedan ser consideradas contrarias a
                                    la moral o buenas costumbres.
                                    • Sin perjuicio de ello, la Red Ean se reserva el derecho de baja cualquier
                                    publicación o imagen en la que considere que hay alguna infracción a las reglas
                                    establecidas, a la ley o que considere inapropiada por alguna razón a su entera
                                    discreción.
                                    • Solo se podrán usar los medios de pago destinados en la plataforma Red Ean.
                                    • Se encuentran prohibida la duplicación de las publicaciones.
                                </p>
                                <form action="/update-terms" method="POST">
                                    <input type="hidden" value="<%= userId %>" name="userId">
                                    <div class="form-check form-check-inline"></div>
                                    <input class="" name="tc" type="checkbox" id="tcCheckbox" value="option1">
                                    <label class="form-check-label tc" for="inlineCheckbox1">He leído y acepto las
                                        políticas de uso</label>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-success" disabled id="acceptTC">Continuar</button>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <% } %>
    </div>

    <!-- Page Content  -->

    <div id="content">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">

                <button type="button" id="sidebarCollapse" class="btn btn-dark">
                    <i class="fas fa-align-left"></i>
                    <span>Menú</span>
                </button>

                <a dropdown-toggle type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false" href="">
                    <img src="images/avatar.png" width="45" class="avatar" alt="avatar">
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Perfil de empresa</a>
                    <a class="dropdown-item" href="#">PQR</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="/logout">Salir</a>
                </div>
            </div>
        </nav>

        <div class="page-title">
            <h2>Productos</h2>
            <button class="btn btn-secondary" data-toggle="modal" data-target="#addProduct">Añadír producto <i
                    class="fas fa-plus" style="margin: 0 5px;"></i></button>
        </div>

        <div class="row product-row">
            <!-- /.col-->
            <% products.forEach((product) => { %>
            <div class="col-md-3">
                <div class="card">
                    <div class="card rounded">
                        <div class="card-image" style="background-image: url(images/<%= product.image %>);">
                        </div>
                        <div class="card-body">
                            <div class="company-title m-auto">
                                <h5><%= product.title %></h5>
                                <a data-toggle="collapse" href="#<%=product._id%>25" role="button"><i
                                        class="fas fa-sort-down"></i></a>
                            </div>
                            <div class="collapse" id="<%= product._id%>25">
                                <div class="company-info">
                                    <ul>
                                        <li>
                                            <p><i class="fas fa-info"></i>
                                                <%= product.description.substring(0, 18) %> <a
                                                    href="#<%= product._id %>" data-toggle="modal"><span>... ver
                                                        más</span></a></p>
                                        </li>
                                        <li>
                                            <p><i class="fas fa-file"></i> SKU: <%= product.sku %></p>
                                        </li>
                                        <li>
                                            <p><i class="fas fa-folder"></i> Categoría: <%= product.category %></p>
                                        </li>
                                        <li>
                                            <p><i class="fas fa-money-bill"></i> Precio: <%= product.price %></p>
                                        </li>
                                        <li>
                                            <p><i class="fas fa-money-bill"></i> Precio referencia:
                                                <%= product.refPrice %></p>
                                        </li>
                                        <li>
                                            <p><i class="fas fa-shopping-cart"></i> Max: <%= product.maxPerson %>
                                            </p>
                                        </li>
                                        <li>
                                            <p><i class="fas fa-boxes"></i> Stock: <%= product.stock %></p>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <% }); %>
            <!-- /.col-->
        </div>
        <!-- end row-->

        <!-- Add Product Modal -->
        <div class="modal fade add-product" id="addProduct" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Nuevo producto</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" style="color: white;">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="/new-product" enctype="multipart/form-data" method="POST">
                            <input type="hidden" class="form-control" name="companyID" value="<%= companyId %>">
                            <div class="form-group">
                                <label for="">Nombre del producto</label>
                                <input type="text" class="form-control" name="productTitle" id=""
                                    placeholder="Nombre del producto">
                            </div>
                            <div class="form-group">
                                <label for="">Descripción del producto</label>
                                <textarea class="form-control" id="productDesctiption" name="productDescription"
                                    rows="5" placeholder="Describe tu producto a detalle"></textarea>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="">SKU o número de referencia</label>
                                        <input type="text" class="form-control" name="productSKU" id=""
                                            placeholder="Código indetificador del producto">
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label for="">Categoría</label>
                                        <input type="text" class="form-control" name="productCategory" id=""
                                            placeholder="Categoría del producto">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Imágenes</label>
                                <input type="file" name="upload" multiple>
                            </div>
                            <div class="row form-group">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="">Precio</label>
                                        <input type="text" class="form-control" name="price" id=""
                                            placeholder="Precio actual del producto">
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label for="">Precio referencia (opcional)</label>
                                        <input type="text" class="form-control" name="referencePrice" id=""
                                            placeholder="Precio sin descuento">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="">Máximo permido por persona</label>
                                        <input type="text" class="form-control" name="maxUser" id=""
                                            placeholder="Cantidad máxima que un usario puede comprar">
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label for="">Inventario</label>
                                        <input type="text" class="form-control" name="productStock" id=""
                                            placeholder="Inventario disponible">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" value="Upload" class="btn btn-dark">Añadir producto</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- End Add Product Modal -->

        <!-- Product Info Modal -->
        <% products.forEach((product) => { %>
        <div class="modal fade add-product" id="<%= product._id %>" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Descripción <%= product.title %></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p><%= product.description %></p>
                    </div>
                </div>
            </div>
        </div>
        <% }); %>

        <!-- End Product Info Modal -->


    </div>
    </div>

    <div class="overlay"></div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous">
    </script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
    </script>
    <!-- jQuery Custom Scroller CDN -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js">
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#sidebar").mCustomScrollbar({
                theme: "minimal"
            });

            $('#dismiss, .overlay').on('click', function () {
                $('#sidebar').removeClass('active');
                $('.overlay').removeClass('active');
            });

            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').addClass('active');
                $('.overlay').addClass('active');
                $('.collapse.in')('in');
                $('a[aria-expanded=true]').attr('aria-expanded', 'false');
            });

            $('#tcCheckbox').on('click', function () {
                if ($(this).is(":checked")) {
                    $('#acceptTC').removeAttr('disabled');
                } else {
                    $('#acceptTC').attr('disabled');
                }
            });

        });
    </script>
</body>

</html>